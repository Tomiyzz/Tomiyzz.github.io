---
layout: post
title: 地址栏输入URL后发生了什么
tags: mathjax
math: true
date: 2021-11-16 12:00 +0800
---

地址栏输入 URL 后发生了什么
{: .message }

## 地址栏输入 Url 后发生了什么?

有 URL 解析,DNS 查询,TCP 连接,HTTP 请求,响应请求和页面渲染

- URL 解析: 先判断你输入的是一个合法的 URL,还是一个待搜索的关键字,进行对应操作

- DNS 查询: 获取到域名对应服务器 IP 地址

  - 查询浏览器缓存
  - 检查系统缓存(检查 host 文件)
  - 检查路由器缓存
  - 查询 ISP DNS 缓存(本地服务器缓存)
  - 递归查询(根域名服务器 -> 顶级域名服务器 -> 极限域名服务器 依次搜索对应目标的 IP)

- TCP 连接: 三次握手建立 TCP 连接

  - 第一次握手: 客户端向服务端发送请求(SYN=1)等待服务器确认
  - 第二次握手: 服务器收到请求并确认,回复一个指令(SYN=1,ACK=1)
  - 第三次握手: 客户端收到服务器的回复指令并返回确认(ACK=1)

- 请求和传输数据

- 浏览器渲染页面
  - 浏览器解析 html 源码,创建 DOM 树
  - 浏览器解析 CSS 代码,计算出最终的样式数据,形成 css 对象模型 CSSOM
  - 利用 DOM 和 CSSOM 构建一个渲染树,
  - 浏览器根据渲染树直接把页面会知道屏幕上
